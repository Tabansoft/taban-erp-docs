# مروری بر مدیریت چک‌های دریافتی

-----

## ۱. مقدمه: چک به عنوان یک دارایی زنده

به بخش **مدیریت چک‌های دریافتی** در ERP تابان خوش آمدید.
در حسابداری سنتی، چک‌ها اغلب به عنوان اعداد و ارقام در دفاتر ثبت می‌شوند. اما در سیستم تابان، هر برگ چک یک **موجودیت زنده (Living Entity)** است. چرا؟ چون هر چک:

1.  **متولد می‌شود:** (لحظه دریافت از مشتری).
2.  **سفر می‌کند:** (از گاوصندوق به بانک، یا به دست تأمین‌کننده).
3.  **تغییر وضعیت می‌دهد:** (نقد می‌شود، برگشت می‌خورد، یا استرداد می‌شود).

این ماژول طراحی شده تا شما به عنوان مدیر مالی یا خزانه‌دار، در هر لحظه بر سرنوشت تک‌تک اسناد تجاری خود مسلط باشید و دیگر نگران گم شدن فیزیک چک یا فراموشی تاریخ سررسید نباشید.

-----

## ۲. معماری سیستم: مفهوم «مخزن چک» (Check Repository)

مهم‌ترین مفهومی که باید در این سیستم با آن آشنا شوید، **«مخزن چک»** است.
در دنیای واقعی، چک فیزیکی نمی‌تواند همزمان در دو جا باشد. در سیستم نیز ما از «مخزن» استفاده می‌کنیم تا دقیقاً بگوییم فیزیک چک الان کجاست. چک‌ها در طول عمر خود بین این مخازن جابجا می‌شوند.

### لیست مخازن استاندارد سیستم

| نام مخزن | نام انگلیسی | شرح کاربردی | وضعیت حسابداری |
| :--- | :--- | :--- | :--- |
| **مخزن اسناد نزد صندوق** | `Safe Repository` | **(گاوصندوق شرکت)** <br> چک‌هایی که تازه از مشتری گرفته‌اید و فیزیک آن‌ها داخل کشو یا گاوصندوق خزانه‌دار است. | `اسناد دریافتنی نزد صندوق` |
| **مخزن در جریان وصول** | `In-Collection Repo` | **(نزد بانک)** <br> چک‌هایی که از شرکت خارج شده و برای وصول (کلر) به متصدی بانک تحویل داده شده‌اند. | `اسناد در جریان وصول` |
| **مخزن چک‌های برگشتی** | `Bounced Repo` | **(واحد پیگیری)** <br> چک‌هایی که سررسید شده‌اند اما به دلیل عدم موجودی، نکول شده‌اند. | `اسناد دریافتنی برگشتی` |
| **مخزن چک‌های تضمینی** | `Guarantee Repo` | **(بایگانی تضمینات)** <br> چک‌هایی که بابت حسن انجام کار گرفته شده و قرار نیست نقد شوند. | `حساب‌های انتظامی` |

> **نکته مهم:** هر مخزن در نرم‌افزار به یک **حساب معین (GL Account)** اختصاصی متصل است. وقتی شما در سیستم، چک را از یک مخزن به مخزن دیگر می‌برید، سیستم به صورت خودکار سند حسابداری جابجایی بین این حساب‌ها را صادر می‌کند.

-----

## ۳. نقشه راه عملیات (Workflows)

در این ماژول، شما با ۵ عملیات اصلی سروکار دارید. بیایید سناریوی هر کدام را بررسی کنیم:

### ۱. دریافت (Receipt)

  * **سناریو:** مشتری چک را روی میز شما می‌گذارد.
  * **عملیات سیستم:** ثبت «سند دریافت».
  * **نتیجه:** چک در **مخزن صندوق** ایجاد می‌شود.

### ۲. واگذاری (Deposit/Lodge)

  * **سناریو:** موعد چک نزدیک است. شما چک‌ها را در پاکت می‌گذارید و به بانک می‌برید.
  * **عملیات سیستم:** استفاده از فرم «واگذاری به بانک».
  * **نتیجه:** چک از مخزن صندوق کسر و به **مخزن در جریان وصول** اضافه می‌شود.

### ۳. تعیین تکلیف (Clearance/Bounce)

  * **سناریو:** صورتحساب بانک را چک می‌کنید.
      * *حالت اول:* پول واریز شده، دکمه **«وصول شد»** را می‌زنید. (چک از سیستم خارج و تبدیل به پول نقد می‌شود).
      * *حالت دوم:* چک برگشت خورده، دکمه **«برگشت خورد»** را می‌زنید. (چک به مخزن برگشتی می‌رود).

### ۴. خرج کردن (Endorsement)

  * **سناریو:** بدهی به یک فروشنده آهن دارید. به جای پول نقد، چک مشتری خودتان را پشت‌نویسی می‌کنید و به او می‌دهید.
  * **عملیات سیستم:** ثبت «سند پرداخت» با روش «خرج چک».
  * **نتیجه:** چک از دارایی‌های شما خارج شده و بدهی شما تسویه می‌شود.

### ۵. استرداد (Return)

  * **سناریو:** مشتری می‌آید و می‌گوید "چکم را نبر بانک، بیا پول نقد بگیر و لاشه چک را پس بده".
  * **عملیات سیستم:** فرم «استرداد چک».
  * **نتیجه:** سند دریافت اولیه معکوس شده و چک از سیستم حذف می‌شود.

-----

## ۴. شناسه صیادی: قلب تپنده ردیابی

در سیستم تابان، **شناسه ۱۶ رقمی صیادی** یک فیلد متنی ساده نیست؛ بلکه اثر انگشت چک است.

  * **جلوگیری از تقلب:** سیستم اجازه نمی‌دهد یک شناسه صیادی دو بار در سیستم ثبت شود (حتی اگر سال‌ها پیش ثبت شده باشد).
  * **یکپارچگی:** در آینده برای مغایرت‌گیری بانکی، سیستم بر اساس همین شناسه متوجه می‌شود کدام ردیف بانک مربوط به کدام چک در سیستم است.

-----

## ۵. مثال جامع عملیاتی (سناریوی شرکت پخش)

بیایید یک داستان واقعی را مرور کنیم تا مفاهیم بالا کاملاً جا بیفتد.

**بازیگران:**

  * **شرکت ما:** پخش مواد غذایی تابان.
  * **مشتری:** سوپرمارکت کوروش (آقای رضایی).
  * **بانک ما:** بانک ملت (شعبه مرکزی).

**پرده اول: دریافت چک (۱۴۰۳/۰۲/۰۱)**
آقای رضایی بابت خرید کالا، یک چک ۵۰ میلیون تومانی به تاریخ سررسید ۱۰ روز بعد (۱۴۰۳/۰۲/۱۰) به ویزیتور ما می‌دهد.

  * *در سیستم:* کاربر «سند دریافت» ثبت می‌کند.
  * *وضعیت:* چک در **مخزن صندوق** قرار می‌گیرد.

**پرده دوم: خواباندن به حساب (۱۴۰۳/۰۲/۰۸)**
دو روز مانده به سررسید، حسابدار چک را از گاوصندوق برداشته و به بانک ملت می‌برد.

  * *در سیستم:* کاربر فرم «واگذاری به بانک» را باز کرده، مبدأ را صندوق و مقصد را بانک ملت انتخاب می‌کند.
  * *وضعیت:* چک به **مخزن در جریان وصول (ملت)** منتقل می‌شود.

**پرده سوم: روز سررسید و برگشت (۱۴۰۳/۰۲/۱۰)**
بانک پیامک می‌دهد که حساب آقای رضایی موجودی ندارد. چک برگشت می‌خورد.

  * *در سیستم:* کاربر در فرم «اعلام وضعیت»، گزینه **برگشت** را می‌زند.
  * *وضعیت:* چک به **مخزن چک‌های برگشتی** می‌رود. (سیستم حساب اسناد برگشتی را بدهکار می‌کند).

**پرده آخر: تسویه نهایی (۱۴۰۳/۰۲/۱۵)**
با آقای رضایی تماس می‌گیریم. او می‌آید، ۵۰ میلیون کارت می‌کشد (واریز نقد) و لاشه چک برگشتی‌اش را می‌خواهد.

1.  یک «سند دریافت نقدی» ثبت می‌کنیم (پول به حساب بانک می‌نشیند).
2.  از فرم «استرداد چک»، چک موجود در مخزن برگشتی را انتخاب و به آقای رضایی استرداد می‌کنیم.

<!-- end list -->

  * *نتیجه:* پرونده چک بسته می‌شود.

-----

## ۶. پیش‌نیازهای شروع کار

برای اینکه بتوانید از این ماژول استفاده کنید، باید موارد زیر در بخش `تعاریف پایه` تکمیل شده باشند:

1.  **تعریف بانک‌ها:** نام بانک‌های کشور (ملی، صادرات، ...) در سیستم باشد.
2.  **تعریف مخازن چک:**
      * حداقل یک مخزن از نوع "نزد صندوق".
      * به ازای هر حساب جاری شرکت، یک مخزن از نوع "در جریان وصول".
      * یک مخزن از نوع "برگشتی".
3.  **ارتباط با حسابداری:** مطمئن شوید حسابدار ارشد، کدهای حساب معین (GL Codes) مربوط به هر مخزن را در تنظیمات لینک کرده است. بدون این لینک، اسناد اتوماتیک صادر نمی‌شوند.