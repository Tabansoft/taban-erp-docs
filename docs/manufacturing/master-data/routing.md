# فرآیند تولید (Routing)

---

## ۱. هدف

هدف از این فرم، تعریف **مراحل، عملیات و توالی** مورد نیاز برای ساخت یک محصول است. فرآیند تولید به سوال «محصول **چگونه** ساخته می‌شود؟» پاسخ می‌دهد و مشخص می‌کند که در هر مرحله، چه کاری، کجا (در کدام مرکز کار) و با چه منابعی (نوع منبع) انجام شود.

---

## ۲. محل دسترسی در سیستم

**ماژول:** مدیریت تولید (Production Management)
**مسیر:**
`مدیریت تولید / مهندسی / فرآیندهای تولید (Routing)`

---

## ۳. تعریف

**فرآیند تولید (Routing)** سند مهندسی اصلی است که توالی عملیات (Operations) را برای تولید یک «مقدار پایه» (Basis Quantity) از محصول مشخص می‌کند. هر عملیات شامل اطلاعاتی در مورد مرکز کار مورد نیاز، انواع منابع، و زمان‌های استاندارد (آماده‌سازی و اجرا) است.

این فرم از دو بخش اصلی تشکیل شده است:
۱. **هدر (Header):** اطلاعات کلی فرآیند (برای کدام محصول و کدام BOM).
۲. **عملیات (Operations):** لیست گام‌های اجرایی و نیازمندی‌های منابع آن‌ها.

---

## ۴. کاربردها

* **برنامه‌ریزی و زمان‌بندی (Scheduling):** مبنای اصلی محاسبه زمان شروع و پایان هر عملیات و کل سفارش تولید.
* **برنامه‌ریزی ظرفیت (CRP):** محاسبه بار کاری (Load) مورد نیاز برای هر مرکز کار و منبع.
* **بهای تمام شده:** محاسبه هزینه‌های مستقیم کار (Labor) و سربار ساخت (Overhead) بر اساس زمان‌های عملیات و نرخ هزینه منابع.
* **راهنمای کارگاه:** ارائه دستورالعمل گام‌به‌گام به اپراتورهای سطح کارگاه.

---

## ۵. فیلدهای اطلاعاتی

### بخش هدر (Routing Header)

| نام فیلد | نوع داده | توضیح |
| :--- | :--- | :--- |
| **نام (Name)** | متنی | یک نام توصیفی (مثلاً «فرآیند تولید خوراک طیور») |
| **محصول (Product)** | انتخابی (از کالاها) | محصول نهایی که این فرآیند آن را تولید می‌کند |
| **مقدار پایه (Basis Quantity)** | عددی | این فرآیند برای چه مقداری از محصول تعریف شده است (مثلاً ۱۰۰۰ کیلوگرم) |
| **واحد مقدار پایه** | انتخابی (از UoM) | واحد اندازه‌گیری مقدار پایه (مثلاً «کیلوگرم») |
| **فرمول تولید (BOM)** | انتخابی (از BOMs) | مشخص می‌کند این فرآیند از کدام BOM برای مصرف مواد استفاده می‌کند |
| **وضعیت (Status)** | انتخابی | وضعیت (مثلاً: در حال طراحی، تایید شده، بایگانی شده) |
| **نسخه (Version Number)** | متنی (آینده) | (توسعه آتی) برای مدیریت تغییرات مهندسی |
| **تاریخ اعتبار (Valid From/To)** | تاریخ (آینده) | (توسعه آتی) محدوده زمانی اعتبار این نسخه |

### بخش عملیات (Operations / Lines)

| نام فیلد | نوع داده | توضیح |
| :--- | :--- | :--- |
| **ترتیب (Sequence)** | عددی | ترتیب اجرای عملیات (مثلاً ۱۰، ۲۰، ۳۰). **این شماره به BOM لینک می‌شود.** |
| **نام عملیات (Name)** | متنی | عنوان عملیات (مثلاً «میکس نهایی»، «برشکاری لوله‌ها») |
| **مرکز کار (Work Center)** | انتخابی | مکانی که این عملیات در آن انجام می‌شود (مثلاً «سالن میکس») |
| **زمان صف (Queue Time)** | عددی (زمان) | (اختیاری) زمان استاندارد انتظار قطعه *قبل* از شروع آماده‌سازی |
| **زمان انتظار (Wait Time)** | عددی (زمان) | (اختیاری) زمان استاندارد انتظار قطعه *بعد* از اتمام اجرا (مثلاً زمان خشک شدن) |
| **زمان انتقال (Move Time)** | عددی (زمان) | (اختیاری) زمان انتقال به عملیات بعدی |

### بخش منابع مورد نیاز (Resource Requirements) - (زیرمجموعه هر عملیات)

| نام فیلد | نوع داده | توضیح |
| :--- | :--- | :--- |
| **نوع منبع (Resource Type)** | انتخابی | چه نوع منبعی نیاز است؟ (مثلاً «ماشین تراش CNC» یا «اپراتور ماهر») |
| **مقدار (Quantity)** | عددی | چند واحد از این نوع منبع نیاز است؟ (مثلاً ۱ ماشین، ۲ اپراتور) |
| **مبنای زمان آماده‌سازی** | انتخابی | ثابت برای سفارش / ثابت برای بچ / به ازای واحد |
| **زمان آماده‌سازی (Setup)** | عددی (زمان) | زمان استاندارد آماده‌سازی (مثلاً ۱۵ دقیقه) |
| **مبنای زمان اجرا** | انتخابی | به ازای مقدار پایه / ثابت برای بچ / به ازای واحد |
| **زمان اجرا (Run Time)** | عددی (زمان) | زمان استاندارد اجرا (مثلاً ۳۰ دقیقه برای «مقدار پایه») |
| **میزان مصرف ظرفیت** | عددی | این عملیات چه مقدار از ظرفیت منبع را اشغال می‌کند؟ (مثلاً ۱ «کار» یا ۱۰۰۰ «کیلوگرم») |
| **قابلیت‌های مورد نیاز** | انتخابی (چندتایی) | (اختیاری) مهارت‌های خاص مورد نیاز از آن نوع منبع |

---

## ۶. نکات کاربردی

1.  **اتصال BOM و Routing:** اتصال حیاتی از طریق فیلد «ترتیب (Sequence)» در عملیات و «شماره عملیات تخصیص» در اجزای BOM برقرار می‌شود.
2.  **زمان‌ها و مقدار پایه:** زمان اجرا (Run Time) معمولاً برای «مقدار پایه» هدر تعریف می‌شود. مثال: اگر مقدار پایه ۱۰۰۰ کیلوگرم و زمان اجرا ۳۰ دقیقه باشد، یعنی تولید ۱۰۰۰ کیلوگرم ۳۰ دقیقه طول می‌کشد. سیستم برای سفارش ۲۰۰۰ کیلویی، $۲ \times ۳۰ = ۶۰$ دقیقه زمان اجرا محاسبه می‌کند (اگر مبنای زمان «به ازای مقدار پایه» باشد).
3.  **زمان‌های صف، انتظار، انتقال:** این زمان‌ها به زمان کل فرآیند (Lead Time) اضافه می‌شوند اما ظرفیت منبع را اشغال نمی‌کنند (مثلاً زمان خشک شدن رنگ).

---

## ۷. مثال کاربردی

**سناریو: تولید ۱ عدد «دوچرخه M-200»** (متصل به مثال BOM)

**هدر (Header):**
* **نام:** فرآیند تولید دوچرخه M-200
* **محصول:** دوچرخه M-200 (کد P-100)
* **مقدار پایه:** ۱
* **واحد:** عدد
* **فرمول تولید (BOM):** BOM دوچرخه M-200
* **وضعیت:** تایید شده

**عملیات (Operations):**

| ترتیب (Seq) | نام عملیات | مرکز کار | زمان انتظار (دقیقه) |
| :--- | :--- | :--- | :--- |
| ۱۰ | برشکاری لوله‌ها | WC-TRASH | ۰ |
| ۲۰ | مونتاژ و جوشکاری فریم | WC-WELD | ۰ |
| ۳۰ | رنگ‌آمیزی | WC-PAINT | ۱۲۰ (خشک شدن) |

**منابع مورد نیاز (Resource Requirements) برای عملیات ۱۰ (برشکاری):**

| نوع منبع | مقدار | مبنای Setup | زمان Setup (دقیقه) | مبنای Run | زمان Run (دقیقه) | مصرف ظرفیت |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| ماشین تراش CNC | ۱ | ثابت سفارش | ۱۰ | به ازای واحد | ۵ | ۱ (کار) |
| اپراتور ماهر | ۱ | ثابت سفارش | ۵ | به ازای واحد | ۵ | ۱ (کار) |

**منابع مورد نیاز (Resource Requirements) برای عملیات ۲۰ (جوشکاری):**

| نوع منبع | مقدار | مبنای Setup | زمان Setup (دقیقه) | مبنای Run | زمان Run (دقیقه) | قابلیت مورد نیاز |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| دستگاه جوشکاری | ۱ | ثابت سفارش | ۵ | به ازای واحد | ۱۲ | - |
| اپراتور جوشکار | ۱ | ثابت سفارش | ۲ | به ازای واحد | ۱۳ | جوشکاری گرید A |

---

## ۸. ارتباط با سایر ماژول‌ها

| ماژول مرتبط | نوع ارتباط | توضیح |
| :--- | :--- | :--- |
| **فرمول تولید (BOM)** | وابسته (بسیار قوی) | اتصال از طریق «شماره عملیات تخصیص» |
| **مرکز کار (Work Center)** | استفاده مستقیم | هر عملیات به یک مرکز کار تخصیص می‌یابد |
| **نوع منبع (Resource Type)** | استفاده مستقیم | تعریف نیازمندی‌های هر عملیات |
| **برنامه‌ریزی تولید** | استفاده مستقیم | مبنای ایجاد سفارش‌های تولید و زمان‌بندی |
| **بهای تمام شده (Costing)** | وابسته | مبنای محاسبه هزینه دستمزد و سربار |

---

## ۹. خطاها و هشدارهای احتمالی

| خطا / هشدار | علت | راه‌حل |
| :--- | :--- | :--- |
| «عملیات فاقد مرکز کار است» | مرکز کاری برای یک عملیات انتخاب نشده | مرکز کار مرتبط را انتخاب کنید |
| «عملیات فاقد نیازمندی منبع است» | برای یک عملیات، هیچ نوع منبعی تعریف نشده | حداقل یک ردیف نیازمندی منبع (Resource Req) تعریف کنید |
| «زمان اجرا یا آماده‌سازی صفر است» | زمان‌های استاندارد وارد نشده‌اند | زمان‌های استاندارد را بر اساس مهندسی صنایع وارد کنید |
| «ترتیب عملیات تکراری است» | دو عملیات با Sequence یکسان (مثلاً هر دو ۱۰) | از شماره‌های ترتیب یکتا استفاده کنید |

---

## ۱۰. توسعه‌های آتی (پیشنهادی)

* افزودن فیلد **«خروجی واقعی مرحله» (Yield Quantity)** برای مدیریت ضایعات در هر مرحله.
* افزودن **«مقدار ارسال به مرحله بعد» (Send Ahead Qty)** برای همپوشانی عملیات‌ها (Overlapping).
* امکان تعریف **عملیات‌های پیمانکاری (Subcontracting)**.