# مراکز کار (Work Centers)

---

## ۱. هدف

هدف از این فرم، تعریف یک **مکان فیزیکی یا منطقی** در کارخانه است که در آن یک یا چند عملیات تولیدی انجام می‌شود. مراکز کاری، **منابع (Resources)** را گروه‌بندی می‌کنند و به عنوان واحد اصلی برای زمان‌بندی و تجمیع هزینه‌ها (سربار) عمل می‌کنند و منطق انتخاب منبع (قاعده تخصیص) را مشخص می‌کنند.

---

## ۲. محل دسترسی در سیستم

**ماژول:** برنامه‌ریزی و کنترل تولید (Production Management)

**مسیر:**
`برنامه‌ریزی و کنترل تولید / تعاریف پایه / مراکز کار`

---

## ۳. تعریف

**مرکز کار (Work Center)** یک واحد سازمانی در سطح واحد عملیاتی (Operating Unit) است. این مرکز می‌تواند یک دستگاه واحد، گروهی از دستگاه‌های مشابه (مانند «کارگاه تراش»)، یا یک خط مونتاژ باشد. در «فرآیند تولید» (Routing)، عملیات به مراکز کاری تخصیص داده می‌شوند.

**مثال‌ها:**

* کارگاه تراش (شامل: CNC-01, CNC-02, علی احمدی)
* سالن میکس (شامل: Mixer-A, Mixer-B)
* ایستگاه جوشکاری
* خط بسته‌بندی نهایی

---

## ۴. کاربردها

* **گروه‌بندی منابع:** تخصیص منابع (ماشین و انسان) به یک مکان یا گروه کاری مشخص.
* **برنامه‌ریزی و زمان‌بندی:** عملیات تولید به یک مرکز کار تخصیص می‌یابد. سپس موتور زمان‌بندی، بر اساس **قاعده تخصیص** تعریف شده برای این مرکز کار، یک منبع **در دسترس** از داخل آن مرکز کار را انتخاب می‌کند.
* **تعیین منطق بهینه‌سازی:** مشخص کردن اینکه آیا این مرکز کار باید بر اساس **سریع‌ترین زمان شروع**، **سریع‌ترین منبع** یا **کم‌هزینه‌ترین منبع**، عملیات‌ها را تخصیص دهد.
* **بهای تمام شده (آینده):** تجمیع هزینه‌های سربار (مانند برق سالن، استهلاک) در سطح مرکز کار، و سپس سرشکن کردن آن بر روی سفارش‌های تولیدی که از آن عبور کرده‌اند (از طریق فیلد «مرکز هزینه»).

---

## ۵. فیلدهای اطلاعاتی

| نام فیلد | نوع داده | توضیح |
| :--- | :--- | :--- |
| **کد مرکز کار** | متنی / عددی | شناسه یکتا (مثلاً `WC-CUT`) |
| **نام مرکز کار** | متنی | عنوان توصیفی (مثلاً «کارگاه برشکاری») |
| **مکان عملیاتی (Operating Unit)** | انتخابی | واحد سازمانی بالاتر (مثلاً «کارخانه تولید خوراک طیور») |
| **تقویم کار (Work Calendar)** | انتخابی | تقویم کاری پیش‌فرض برای این مرکز کار (می‌تواند توسط تقویم منابع زیرمجموعه لغو شود) |
| **منابع در دسترس (Resources)** | انتخابی (چندتایی) | لیستی از منابع (Resources) که در این مرکز کار فعالیت می‌کنند |
| **قاعده تخصیص (Dispatching Rule)** | انتخابی | (بسیار مهم) منطق انتخاب منبع از بین منابع در دسترس. (مثلاً: «اولین در دسترس»، «سریع‌ترین منبع»، «کم‌هزینه‌ترین») |
| **مرکز هزینه (Cost Center)** | انتخابی (آینده) | (توسعه آتی) اتصال به ماژول مالی برای تجمیع هزینه‌های سربار |

---

## ۶. نکات کاربردی
* **اهمیت قاعده تخصیص:** این فیلد مستقیماً بر خروجی زمان‌بندی تأثیر می‌گذارد.
	* «اولین در دسترس» (First Available): رایج‌ترین قاعده. کار را به اولین منبعی می‌دهد که آزاد است تا کار هرچه سریع‌تر شروع شود.
	* «سریع‌ترین منبع» (Fastest Resource): برای گلوگاه‌ها (Bottlenecks) حیاتی است. کار را به منبعی با بالاترین «ضریب عملکرد» 	(Performance Factor) می‌دهد، حتی اگر لازم باشد چند ساعت برای آزاد شدن آن صبر کند.
* **تنظیم پیش‌فرض سراسری:** معمولاً یک «قاعده تخصیص» پیش‌فرض در «تنظیمات ماژول تولید» تعریف می‌شود (مثلاً «اولین در دسترس»). فیلد موجود در این فرم (مرکز کار) به شما اجازه می‌دهد تا برای مراکز کاری خاص و حساس (مانند گلوگاه‌ها)، این قانون سراسری را لغو (Override) کرده و از منطق دیگری (مانند «سریع‌ترین منبع») استفاده کنید.
* **تخصیص منابع:** یک **منبع (Resource)** می‌تواند در *چند* مرکز کار وجود داشته باشد (مثلاً یک اپراتور ماهر که هم در مرکز کار «تراشکاری» و هم «فرزکاری» کار می‌کند).
* **مالی:** **مرکز کار** قلب اتصال بین مهندسی (Routing) و مالی (Costing) است. اگرچه فیلد «مرکز هزینه» در MVP آتی است، اما ساختار باید بر این اساس بنا شود.
* **اولویت تقویم:** تقویم مرکز کار به عنوان یک الگوی کلی عمل می‌کند، اما در محاسبات دقیق زمان‌بندی، **تقویم هر منبع** اولویت دارد.

---

## ۷. مثال کاربردی

| کد | نام | مکان عملیاتی | تقویم کار | قاعده تخصیص | منابع در دسترس |
| :--- | :--- | :--- | :--- | :--- | :--- |
| WC-TRASH | کارگاه تراش | کارخانه A | ۲ شیفت | سریع‌ترین منبع | {CNC-01, CNC-02, علی احمدی, رضا حسینی} |
| WC-MIX | سالن میکس | کارخانه B | ۲۴/۷ | اولین در دسترس | {Mixer-A, Mixer-B} |
| WC-WELD | ایستگاه جوشکاری | کارخانه A | ۱ شیفت | اولین در دسترس | {دستگاه جوش ۰۱, دستگاه جوش ۰۲, علی احمدی} |
| WC-PACK | خط بسته‌بندی | کارخانه B | ۲ شیفت | کم‌هزینه‌ترین منبع | {خط بسته بندی ۰۱, اپراتور بسته بندی ۰۱} |

> *توجه:* در مثال بالا، «علی احمدی» در دو مرکز کار (`WC-TRASH` و `WC-WELD`) حضور دارد. همچنین «کارگاه تراش» به عنوان گلوگاه، طوری تنظیم شده که همیشه منابع سریع‌تر را انتخاب کند، در حالی که سایر مراکز کاری از قواعد استاندارد یا مبتنی بر هزینه استفاده می‌کنند.

---

## ۸. ارتباط با سایر ماژول‌ها

| ماژول مرتبط | نوع ارتباط | توضیح |
| :--- | :--- | :--- |
| **منبع (Resource)** | استفاده مستقیم | تخصیص منابع به مراکز کاری |
| **فرآیند تولید (Routing)** | استفاده مستقیم | تخصیص هر عملیات به یک مرکز کار |
| **مالی (Costing)** | وابسته (آینده) | اتصال به «مرکز هزینه» برای محاسبه سربار |
| **برنامه‌ریزی تولید** | وابسته | خواندن «قاعده تخصیص» از این فرم برای تصمیم‌گیری |

---

## ۹. خطاها و هشدارهای احتمالی

| خطا / هشدار | علت | راه‌حل |
| :--- | :--- | :--- |
| «مرکز کار فاقد منبع است» | مرکز کاری تعریف شده اما هیچ منبعی به آن تخصیص نیافته | حداقل یک منبع (Resource) به مرکز کار اضافه کنید |
| «قاعده تخصیص انتخاب نشده» | فیلد قاعده تخصیص خالی است | یک قاعده (حداقل «اولین در دسترس») انتخاب کنید یا سیستم را طوری تنظیم کنید که از پیش‌فرض سراسری استفاده کند |
| «مرکز کار در فرآیند تولید استفاده شده» | (هنگام حذف) این مرکز کار در یک یا چند Routing فعال استفاده شده | ابتدا آن را از تمام فرآیندهای تولید حذف کنید |
| «مرکز کار تقویم ندارد» | تقویم کاری پیش‌فرض انتخاب نشده | یک تقویم کاری برای مرکز کار انتخاب کنید |

---

## ۱۰. توسعه‌های آتی (پیشنهادی)

* فعال‌سازی فیلد **«مرکز هزینه» (Cost Center)** و یکپارچگی کامل با ماژول مالی.
* افزودن **قواعد تخصیص ترکیبی** (مثلاً: اول کم‌هزینه‌ترین، و در صورت تساوی، سریع‌ترین).
* تعریف **نرخ‌های سربار (Overhead Rates)** مستقیم برای مرکز کار.