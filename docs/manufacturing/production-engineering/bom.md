# فرمول‌های‌ تولید (Bill of Materials - BOMs)

---

## ۱. هدف

هدف از این فرم، تعریف دقیق **مواد، قطعات و زیرمجموعه‌هایی** است که برای تولید یک محصول مشخص (یا نیمه‌ساخته) مورد نیاز است. BOM به سوال «محصول **از چه چیزی** ساخته می‌شود؟» پاسخ می‌دهد.

---

## ۲. محل دسترسی در سیستم

**ماژول:** برنامه‌ریزی و کنترل تولید (Production Management)

**مسیر:**
`برنامه‌ریزی و کنترل تولید / مهندسی تولید / فرمول‌های تولید (BOM)`

---

## ۳. تعریف

**فرمول تولید (BOM)** یک لیست ساختاریافته (معروف به «درخت محصول») است که شامل تمام اجزای مورد نیاز برای تولید یک «مقدار پایه» (Basis Quantity) از محصول نهایی است. این سند، ستون فقرات برنامه‌ریزی مواد (MRP) و محاسبه بهای تمام شده مواد است.

این فرم از دو بخش اصلی تشکیل شده است:

۱. **سربرگ (Header):** اطلاعات کلی BOM (برای کدام محصول و چه مقداری).
۲. **اجزا (Components):** لیست مواد و قطعات مورد نیاز.

---

## ۴. کاربردها

* **برنامه‌ریزی تأمین مواد (MRP):** محاسبه دقیق نیازمندی‌های مواد اولیه بر اساس سفارش‌های تولید.
* **صدور حواله انبار:** تعیین اینکه چه موادی و به چه مقدار باید از انبار برای یک سفارش تولید صادر شود.
* **بهای تمام شده:** محاسبه هزینه مواد مستقیم (Direct Material Cost) برای محصول نهایی.
* **مهندسی محصول:** نگهداری سوابق دقیق از ساختار محصولات.

---

## ۵. فیلدهای اطلاعاتی

### بخش سربرگ (BOM Header)

| نام فیلد | نوع داده | توضیح |
| :--- | :--- | :--- |
| **نام (Name)** | متنی | یک نام توصیفی (مثلاً «لیست مواد دوچرخه M-200») |
| **محصول (Product)** | انتخابی (از کالاها) | محصول نهایی (والد) که این BOM آن را تعریف می‌کند (مثلاً «دوچرخه M-200») |
| **مقدار پایه (Basis Quantity)** | عددی | این لیست مواد برای چه مقداری از محصول تعریف شده است (مثلاً: ۱) |
| **واحد مقدار پایه** | انتخابی (از UoM) | واحد اندازه‌گیری مقدار پایه (مثلاً «عدد»، «کیلوگرم») |
| **وضعیت (Status)** | انتخابی | وضعیت BOM (مثلاً: در حال طراحی، تایید شده، بایگانی شده) |
| **نسخه (Version Number)** | متنی (آینده) | (توسعه آتی) برای مدیریت تغییرات مهندسی (ECM) |
| **تاریخ اعتبار (Valid From/To)** | تاریخ (آینده) | (توسعه آتی) محدوده زمانی اعتبار این نسخه از BOM |

### بخش اجزا (BOM Components / Lines)

| نام فیلد | نوع داده | توضیح |
| :--- | :--- | :--- |
| **قطعه/ماده (Component)** | انتخابی (از کالاها) | ماده اولیه یا قطعه نیمه‌ساخته مورد نیاز (مثلاً «لاستیک») |
| **مقدار (Quantity)** | عددی | چه مقدار از این قطعه برای «مقدار پایه» محصول لازم است (مثلاً: ۲) |
| **واحد اندازه‌گیری (UoM)** | انتخابی (از UoM) | واحد اندازه‌گیری قطعه (مثلاً «عدد»، «کیلوگرم»، «متر») |
| **شماره عملیات تخصیص (Op. Seq.)** | عددی | **(بسیار مهم)** شماره عملیاتی از «فرآیند تولید» (Routing) که این ماده باید در آنجا مصرف شود |
| **درصد ضایعات (Scrap %)** | درصدی | درصد ضایعات پیش‌بینی شده برای این ماده (برای افزایش درخواست از انبار) |

---

## ۶. نکات کاربردی

1.  **اهمیت مقدار پایه:** تمام مقادیر اجزا (Lines) باید نسبت به «مقدار پایه» (سربرگ) تعریف شوند. اگر مقدار پایه ۱ (عدد) دوچرخه باشد، مقدار لاستیک ۲ (عدد) است. اگر مقدار پایه ۱۰۰۰ (کیلوگرم) خوراک طیور باشد، مقدار ذرت ۴۰۰ (کیلوگرم) است.
2.  **اهمیت شماره عملیات تخصیص:** این فیلد، BOM (چه چیزی) را به Routing (چگونه) متصل می‌کند. این فیلد به سیستم می‌گوید که «لوله فریم» باید در عملیات ۱۰ (برشکاری) در دسترس باشد، نه در عملیات ۳۰ (رنگ‌آمیزی).
3.  **ضایعات (Scrap):** اگر برای تولید ۱ دوچرخه (مقدار پایه) به ۲ متر لوله نیاز دارید (مقدار) اما ۵٪ ضایعات برشکاری دارید، باید در فیلد ضایعات ۵٪ را وارد کنید. سیستم هنگام برنامه‌ریزی، ‎۲ / ۱.۰۵ = ۲.۱ متر لوله درخواست خواهد کرد.

---

## ۷. مثال کاربردی

**سناریو: تولید ۱ عدد «دوچرخه M-200»**

**سربرگ (Header):**

* **نام:** BOM دوچرخه M-200
* **محصول:** دوچرخه M-200 (کد P-100)
* **مقدار پایه:** ۱
* **واحد:** عدد
* **وضعیت:** تایید شده

**اجزا (Components):**

| قطعه/ماده (کد کالا) | مقدار | واحد | شماره عملیات تخصیص | ضایعات |
| :--- | :--- | :--- | :--- | :--- |
| فریم (P-101) | ۱ | عدد | ۲۰ (مونتاژ) | ۰٪ |
| لاستیک (C-200) | ۲ | عدد | ۲۰ (مونتاژ) | ۱٪ |
| لوله فریم (R-300) | ۳ | متر | ۱۰ (برشکاری) | ۵٪ |
| رنگ قرمز (R-301) | ۰.۵ | کیلوگرم | ۳۰ (رنگ‌آمیزی) | ۲٪ |

---

## ۸. ارتباط با سایر ماژول‌ها

| ماژول مرتبط | نوع ارتباط | توضیح |
| :--- | :--- | :--- |
| **مدیریت کالا (Product Master)** | استفاده مستقیم | هم برای محصول والد و هم برای اجزای فرزند |
| **فرآیند تولید (Routing)** | وابسته (بسیار قوی) | اتصال از طریق «شماره عملیات تخصیص» |
| **برنامه‌ریزی تولید (MRP)** | استفاده مستقیم | مبنای محاسبه نیازمندی‌های مواد |
| **انبار (Inventory)** | وابسته | مبنای صدور حواله خروج مواد اولیه |
| **بهای تمام شده (Costing)** | وابسته | مبنای محاسبه هزینه مواد محصول |

---

## ۹. خطاها و هشدارهای احتمالی

| خطا / هشدار | علت | راه‌حل |
| :--- | :--- | :--- |
| «محصول والد فاقد BOM است» | (خطای برنامه‌ریزی) تلاش برای تولید محصولی که BOM ندارد | BOM معتبر و «تایید شده» برای محصول ایجاد کنید |
| «شماره عملیات تخصیص نامعتبر» | شماره عملیاتی وارد شده که در Routing متصل به این BOM وجود ندارد | شماره عملیات را در BOM یا Routing اصلاح کنید |
| «BOM چرخه‌ای (Circular)» | محصول A به B نیاز دارد، و محصول B به A نیاز دارد | ساختار BOM را اصلاح کنید تا چرخه از بین برود |
| «مقدار قطعه صفر است» | مقدار یکی از اجزا ۰ وارد شده | مقدار صحیح را وارد کنید یا ردیف را حذف کنید |

---

## ۱۰. توسعه‌های آتی (پیشنهادی)

* فعال‌سازی **مدیریت نسخه (Versioning)** و **تاریخ اعتبار** برای مدیریت تغییرات مهندسی (ECM).
* افزودن **نوع آیتم (Item Type)** در ردیف‌ها (مثلاً: ماده اولیه، کالای نیمه‌ساخته، محصول جانبی (By-product)، محصول مشترک (Co-product)).
* پشتیبانی از **BOM فانتوم (Phantom BOM)** برای زیرمجموعه‌هایی که تولید یا انبارش مستقل ندارند.