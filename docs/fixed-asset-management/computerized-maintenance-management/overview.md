# مدیریت نگهداری و تعمیرات (Maintenance & Repair - CMMS)

**کد سند:** `DOC-PM-01`
**نام ماژول:** `PlantMaintenance`

## ۱. مقدمه و فلسفه وجودی

در یک سازمان تجهیز-محور (مانند کارخانه، شرکت حمل‌ونقل یا هتل)، خرابی تجهیزات یعنی **«توقف درآمد»**.
هدف این ماژول تغییر رویکرد سازمان از **«تعمیر پس از خرابی» (Firefighting)** به **«پیشگیری هوشمند» (Preventive)** است.

این ماژول به سه سوال کلیدی پاسخ می‌دهد:

1.  **چه کاری؟** (چه تجهیزاتی نیاز به سرویس دارند؟)
2.  **چه زمانی؟** (برنامه زمان‌بندی یا کارکرد).
3.  **با چه منابعی؟** (کدام قطعه یدکی و کدام تکنسین؟).

---

## ۲. مفاهیم پایه و ساختار داده (Master Data)

### ۲-۱. تجهیز (Equipment) vs دارایی (Asset)
این رایج‌ترین ابهام است. آیا این دو یکی هستند؟

* **دارایی (Asset):** نگاه مالی (پلاک اموال، استهلاک، ارزش دفتری). *مدیر: حسابدار.*
* **تجهیز (Equipment):** نگاه فنی (سریال فنی، نقشه، قطعات یدکی، دما، فشار). *مدیر: مهندس فنی.*
* **رابطه:** معمولاً ۱ به ۱ است، اما گاهی چند تجهیز (موتور، گیربکس) زیرمجموعه یک دارایی (کامیون) هستند.

### ۲-۲. درختواره مکان‌های فنی (Functional Locations)
ساختار سلسله‌مراتبی که نشان می‌دهد تجهیزات کجا نصب شده‌اند.

* کارخانه A -> سالن تولید -> خط بسته‌بندی -> دستگاه پرکن -> **تجهیز هدف (موتور)**.
* *مزیت:* اگر موتور تعویض شود، سوابق خرابی روی "محل دستگاه پرکن" باقی می‌ماند.

### ۲-۳. لیست قطعات (BOM - Bill of Materials)
لیست قطعات یدکی استاندارد برای هر دستگاه.

* مثال برای لیفتراک: (فیلتر روغن، لنت ترمز، تسمه دینام).
* *کاربرد:* تسریع در صدور درخواست کالا از انبار هنگام تعمیر.

---

## ۳. انواع استراتژی‌های تعمیرات (Maintenance Strategies)

سیستم تابان ۳ استراتژی اصلی را پشتیبانی می‌کند:

### الف) تعمیرات اضطراری (Breakdown / Corrective - CM)
* **سناریو:** دستگاه ناگهان خراب می‌شود (دود می‌کند).
* **فرآیند:** درخواست تعمیر -> تعمیر -> راه‌اندازی.
* **هدف:** کاهش زمان توقف (MTTR).

### ب) نت پیشگیرانه (Preventive Maintenance - PM)
* **سناریو:** سرویس‌های دوره‌ای برای جلوگیری از خرابی.
* **انواع:**
    * **مبتنی بر زمان (Time-based):** هر ۳ ماه یکبار.
    * **مبتنی بر عملکرد (Performance-based):** هر ۵۰۰۰ کیلومتر یا هر ۱۰۰۰ ساعت کارکرد.

### ج) نت مبتنی بر وضعیت (Condition-Based - CBM)
* **سناریو:** سنسور لرزش‌سنج هشدار می‌دهد که یاتاقان در حال خراب شدن است. (اتصال به IoT).

---

## ۴. چرخه اصلی کار: دستور کار (The Work Order Cycle)

قلب تپنده این ماژول، سند **«دستور کار» (Work Order)** است.



### گام ۱: درخواست تعمیر (Work Request)
* **کاربر:** اپراتور دستگاه، راننده یا کارمند اداری.
* **داده‌ها:** دستگاه خراب (کولر)، نوع خرابی (چکه می‌کند)، اولویت (فوری).
* **خروجی:** یک درخواست در کارتابل واحد فنی.

### گام ۲: صدور دستور کار (Work Order Creation)
* **کاربر:** برنامه‌ریز نت (Planner).
* **عملیات:** تایید درخواست و تبدیل آن به "دستور کار".
* **تخصیص:** تعیین تکنسین مسئول (آقای فنی)، قطعات مورد نیاز و زمان تخمینی.

### گام ۳: اجرا و ثبت عملکرد (Execution)
* **کاربر:** تکنسین (ترجیحاً روی موبایل).
* **ثبت‌ها:**
    * **زمان:** "من ۲ ساعت روی این دستگاه کار کردم."
    * **قطعه:** "یک واشر از انبار گرفتم و مصرف کردم."
    * **اقدام:** "نشتی لوله تعمیر شد."

### گام ۴: بستن فنی و مالی (Closing)
* دستور کار بسته می‌شود.
* هزینه‌ها محاسبه شده و به مرکز هزینه یا دارایی منتقل می‌شوند.

---

## ۵. جزئیات فرم دستور کار (Work Order Form)

این فرم جامع‌ترین فرم سیستم است که چندین ماژول را درگیر می‌کند.

| عنوان تب | محتوا و فیلدها | منطق بیزینسی |
| :--- | :--- | :--- |
| **هدر (Header)** | شماره، تجهیز، تاریخ شروع، اولویت، وضعیت (باز/بسته). | وضعیت دستگاه (در حال کار / متوقف) در اینجا ثبت می‌شود. |
| **عملیات (Tasks)** | چک‌لیست کارهایی که باید انجام شود (۱. بازدید روغن ۲. آچارکشی). | تکنسین باید این موارد را تیک بزند. |
| **قطعات (Parts)** | لیست قطعات یدکی مصرفی. | اتصال مستقیم به **انبار**. با تایید این تب، "حواله مصرف انبار" صادر می‌شود. |
| **نیروی انسانی (Labor)** | نام تکنسین + ساعت کارکرد. | محاسبه هزینه دستمزد و اتصال به **HR** (اضافه کار). |
| **هزینه (Cost)** | جمع هزینه مواد + دستمزد + پیمانکار. | تصمیم‌گیری برای CapEx یا OpEx (اتصال به **اموال**). |

---

## ۶. موتور نت پیشگیرانه (PM Engine)

این بخش "مغز متفکر" سیستم است که به صورت خودکار دستور کار تولید می‌کند.

### ۶-۱. تعریف برنامه (PM Plan)
کاربر تعریف می‌کند:

* **تجهیز:** دیزل ژنراتور.
* **تکرار:** هر ۱۰۰۰ ساعت کارکرد.
* **فعالیت:** تعویض روغن و فیلتر.

### ۶-۲. ثبت کارکرد (Meter Reading)
سیستم نیاز دارد بداند دستگاه چقدر کار کرده است.

* **روش دستی:** اپراتور هر روز عدد کنتور را وارد می‌کند.
* **روش اتوماتیک:** اتصال به PLC دستگاه.

### ۶-۳. تولید خودکار (Generation)
یک جاب شبانه (Nightly Job) اجرا می‌شود:

* *چک می‌کند:* آخرین سرویس در کارکرد ۴۰۰۰ بوده. الان کنتور ۵۰۰۵ است.
* *نتیجه:* شرط (۱۰۰۰ ساعت) پاس شد.
* *اقدام:* سیستم یک دستور کار "تعویض روغن" ایجاد و به کارتابل تکنسین می‌فرستد.

---

## ۷. سناریوهای کاربردی (Use Cases)

### سناریوی ۱: تعمیرات اساسی (Major Overhaul) - اتصال به اموال
موتور کامیون تعمیر اساسی می‌شود (هزینه: ۲۰۰ میلیون).

1.  دستور کار صادر می‌شود. قطعات و پیمانکار ثبت می‌شوند.
2.  هنگام بستن دستور کار، مدیر فنی تیک **«سرمایه‌ای» (Capitalize)** را می‌زند.
3.  **نتیجه:** سیستم نت یک درخواست به ماژول "اموال" می‌فرستد تا این ۲۰۰ میلیون به بهای تمام شده کامیون اضافه شود.

### سناریوی ۲: تعمیر در محل (Field Service)
یک دستگاه پوز در فروشگاه مشتری خراب شده.

1.  تکنسین با اپلیکیشن موبایل اعزام می‌شود.
2.  لوکیشن تکنسین روی نقشه ثبت می‌شود.
3.  در محل، بارکد دستگاه را اسکن می‌کند، تعمیر را انجام می‌دهد و امضای دیجیتال مشتری را روی گوشی می‌گیرد.
4.  دستور کار بسته می‌شود.

---

## ۸. ملاحظات فنی برای توسعه‌دهندگان

### الف) ماشین وضعیت (State Machine)
وضعیت دستور کار پیچیده است:

`Draft` -> `Released` (منتشر شده برای اجرا) -> `In Process` -> `Work Done` (کار تمام، منتظر تایید) -> `Closed` (مالی بسته شد).
* **نکته:** قطعات انبار فقط در وضعیت `Released` رزرو می‌شوند و در `Work Done` حواله قطعی می‌خورند.

### ب) محاسبه هزینه (Cost Roll-up)
هزینه نهایی دستور کار شامل:

$$Cost = (\Sigma Material \times Price) + (\Sigma Hours \times Rate) + (External Service)$$

این عدد باید دقیق باشد چون مبنای محاسبات بهای تمام شده و دارایی است.

### ج) تقویم منابع (Resource Scheduling)
سیستم نباید به تکنسینی که مرخصی است کار ارجاع دهد. باید به تقویم HR متصل باشد.

---

## ۹. پرسش‌های متداول (FAQ)

**س: تفاوت "درخواست کار" (Request) با "دستور کار" (Order) چیست؟**

* **پاسخ:** "درخواست" یعنی "من یک مشکل دارم" (نیاز). "دستور کار" یعنی "این مشکل را با این روش حل کن" (مجوز اجرا و هزینه). هر درخواستی لزوماً تبدیل به دستور کار نمی‌شود (شاید رد شود).

**س: آیا بدون انبار می‌توانیم نت داشته باشیم؟**

* **پاسخ:** بله، اما فقط مدیریت نیروی انسانی و پیمانکار خواهد بود. مدیریت قطعات یدکی که بخش بزرگی از هزینه‌هاست از دست می‌رود.

**س: شاخص MTTR و MTBF چیست؟**

* **پاسخ:**
    * **MTBF (میانگین زمان بین خرابی‌ها):** نشان می‌دهد دستگاه چقدر "قابل اطمینان" است (هر چه بیشتر، بهتر).
    * **MTTR (میانگین زمان تعمیر):** نشان می‌دهد تیم فنی چقدر "سریع" است (هر چه کمتر، بهتر).
    * *سیستم تابان این‌ها را اتوماتیک محاسبه می‌کند.*