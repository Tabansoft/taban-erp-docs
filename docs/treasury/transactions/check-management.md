# مفهوم و فرم: مدیریت چک (Check Management)

---

## ۱. مفهوم

با توجه به اهمیت بالای چک در سیستم مالی ایران، تابان نیازمند یک مرکز فرماندهی (داشبورد) برای ردیابی **چرخه عمر (Lifecycle)** تمامی چک‌های دریافتی و پرداختی است.

* **هدف:** مدیریت عملیات مرتبط با چک (واگذاری، وصول، برگشت) و به‌روزرسانی خودکار وضعیت چک و اسناد حسابداری مرتبط.

این ماژول باید دو بخش مجزا داشته باشد:

1.  **مدیریت چک‌های دریافتی (از مشتریان)**
2.  **مدیریت چک‌های پرداختی (به تأمین‌کنندگان)**

---

## ۲. فرم: داشبورد مدیریت چک‌های دریافتی (Received Checks)

این فرم لیستی از تمام چک‌های دریافتی را نشان می‌دهد که وضعیت آن‌ها «نهایی» نشده است (یعنی پاس نشده یا برگشت نخورده است).

**مسیر:**
`خزانه‌داری / عملیات / مدیریت چک‌های دریافتی`

### رابط کاربری (UX) و فیلترها

* **فیلترها:** بر اساس وضعیت چک (نزد صندوق، در جریان وصول)، تاریخ سررسید (از... تا...)، مشتری، بنگاه اقتصادی.
* **نمایش جدولی:**

| انتخاب | شماره چک | سررسید       | مبلغ    | بانک  | مشتری    | وضعیت فعلی        |
| :----- | :------- | :----------- | :------ | :---- | :------- | :---------------- |
| []     | `12345`  | `1403/10/20` | 100,000 | ملت   | شرکت الف | **نزد صندوق**     |
| []     | `67890`  | `1403/10/22` | 250,000 | سامان | شرکت ب   | **در جریان وصول** |

### عملیات قابل انجام (Actions)

کاربر یک یا چند چک را از لیست انتخاب کرده و یکی از عملیات زیر را اجرا می‌کند:

1.  **واگذاری به بانک (Deposit):**
    * *عملیات:* کاربر چک‌هایی که «نزد صندوق» هستند را انتخاب می‌کند.
    * *فرم بازشو:* «تاریخ واگذاری» و «حساب بانکی مقصد» (کدام حساب شرکت) را انتخاب می‌کند.
    * *نتیجه:* وضعیت چک به «در جریان وصول» (In Collection) تغییر می‌یابد و سند حسابداری (موقت) ثبت می‌شود.

2.  **اعلام وصول (Clear):**
    * *عملیات:* کاربر چک‌هایی که «در جریان وصول» هستند را انتخاب می‌کند.
    * *فرم بازشو:* «تاریخ وصول» را وارد می‌کند.
    * *نتیجه:* وضعیت چک به «پاس شده» (Cleared) تغییر می‌یابد. موجودی حساب بانکی شرکت *واقعاً* افزایش می‌یابد و سند حسابداری نهایی ثبت می‌شود.

3.  **اعلام برگشت (Bounce):**
    * *عملیات:* کاربر چک‌هایی که «در جریان وصول» هستند را انتخاب می‌کند.
    * *فرم بازشو:* «تاریخ برگشت» و «دلیل برگشت» را وارد می‌کند.
    * *نتیجه:* وضعیت چک به «برگشتی» (Bounced) تغییر می‌یابد. چک از حساب بانکی خارج و به حساب «اسناد دریافتنی برگشتی» (در GL) و حساب مشتری منتقل می‌شود.

4.  **عودت چک (Return to Customer):**
    * *عملیات:* (معمولاً برای چک‌های برگشتی یا قبل از واگذاری)
    * *نتیجه:* چک از سیستم خارج و حساب مشتری مجدداً بدهکار می‌شود.

---

## ۳. فرم: داشبورد مدیریت چک‌های پرداختی (Issued Checks)

این فرم مشابه بخش قبلی است اما برای چک‌هایی که شرکت صادر کرده است.

**مسیر:**
`خزانه‌داری / عملیات / مدیریت چک‌های پرداختی`

### رابط کاربری (UX) و عملیات

* **نمایش جدولی:** لیستی از چک‌های «صادر شده» که هنوز «پاس نشده‌اند».

| شماره سریال | سررسید       | مبلغ    | حساب بانکی (مبدأ) | در وجه (تأمین‌کننده) | وضعیت فعلی   |
| :---------- | :----------- | :------ | :---------------- | :------------------ | :----------- |
| `1001`      | `1403/10/25` | 500,000 | بانک ملت          | شرکت ج              | **صادر شده** |

### عملیات قابل انجام (Actions)

1.  **اعلام پاس شدن (Clear):**
    * *عملیات:* این معمولاً از طریق «مغایرت بانکی» یا ثبت دستی انجام می‌شود.
    * *فرم بازشو:* «تاریخ پاس شدن» را وارد می‌کند.
    * *نتیجه:* وضعیت چک به «پاس شده» (Cleared) تغییر می‌یابد. موجودی حساب بانکی شرکت *واقعاً* کاهش می‌یابد و سند حسابداری نهایی ثبت می‌شود.

2.  **ابطال چک (Void):**
    * *عملیات:* اگر چک قبل از تحویل به تأمین‌کننده یا به هر دلیلی باطل شود.
    * *نتیجه:* وضعیت چک به «باطل شده» (Voided) تغییر می‌یابد. سریال چک (اگر امکان‌پذیر باشد) می‌تواند مجدداً «خام» شود یا برای همیشه باطل بماند.